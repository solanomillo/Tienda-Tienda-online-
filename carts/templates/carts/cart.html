{% extends 'base.html' %}
{% load static %}
{% load custom_filters %}

{% block content %}
<div class="container my-3 my-md-5">
    <div class="row">
        <div class="col-12">
            <h2 class="mb-3 mb-md-4"><i class="fas fa-shopping-cart me-2"></i>Tu Carrito de Compras</h2>
            
            {% if cart.producto.exists %}
                <!-- Macro para items del carrito (reutilizable) -->
                {% for i in cart.product_related|unique %}
                    {% with producto=i.producto %}
                        <!-- Versión escritorio (hidden en móviles) -->
                        <div class="d-none d-md-block">
                            {% include 'carts/responsive/cart_item_desktop.html' %}
                        </div>
                        
                        <!-- Versión móvil (hidden en desktop) -->
                        <div class="d-block d-md-none mb-3">
                            {% include 'carts/responsive/cart_item_mobile.html' %}
                        </div>
                    {% endwith %}
                {% endfor %}

                <!-- Total y acciones (compartido) -->
                {% include 'carts/responsive/cart_footer.html' %}
            {% else %}
                <!-- Carrito vacío -->
                {% include 'carts/responsive/empty_cart.html' %}
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}